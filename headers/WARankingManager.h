//
//     Generated by classdumpios 1.0.2 (64 bit).
//
//  Copyright (C) 1997-2019 Steve Nygard.
//

#import <objc/NSObject.h>

#import "WARankingStorageDelegate-Protocol.h"

@class MISSING_TYPE, NSArray, NSMutableDictionary, NSMutableSet, NSTimer, NSUserDefaults, WAChatManager, WAChatSessionTransactionListener, WAChatStorage, WANameDirectory, WAPersistentKeyValueStore, WARankingStatusRankingConfiguration, WARankingStorage, WARepeatingBlockTask, WAStatusRankingCachedState, WAStatusSessionManager, WATaskManager;

@interface WARankingManager : NSObject <WARankingStorageDelegate>
{
    WAChatManager *_chatManager;
    WAChatStorage *_chatStorage;
    WAPersistentKeyValueStore *_localKeyValueStore;
    WANameDirectory *_nameDirectory;
    WAStatusSessionManager *_sessionManager;
    WATaskManager *_taskManager;
    WARankingStorage *_rankingStore;
    NSUserDefaults *_userDefaults;
    WAChatSessionTransactionListener *_chatStorageListener;
    WARepeatingBlockTask *_primaryRankingTask;
    WARepeatingBlockTask *_dailyRankingTask;
    double _lastFullRankStartTime;
    double _lastFullRankDuration;
    NSTimer *_deferredScoreUpdateTimer;
    _Bool _needsDeferredScoreUpdates;
    NSMutableSet *_boostedChatSessionIDs;
    NSMutableDictionary *_updatedRankScores;
    NSMutableSet *_chatSessionsWithIncomingMessagesToRank;
    NSMutableSet *_incomingMessagesToForward;
    NSArray *_statusChatSessionsIDs;
    WAStatusRankingCachedState *_cachedRankingState;
    short _rankScoreUpperBound;
    unsigned long long _statusListCursor;
    unsigned long long _batchCursor;
    WARankingStatusRankingConfiguration *_rankingConfiguration;
}

+ (id)aggregateKey;
+ (id)jidForJidKey:(id)arg1;
+ (id)jidForKey:(id)arg1;
+ (id)keyForJID:(id)arg1;
- (void).cxx_destruct;
- (void)attemptDeferredScoreUpdates;
- (void)backgroundRankStatusChatSessions:(id)arg1 usingRankingCache:(id)arg2 completion:(CDUnknownBlockType)arg3;
- (void)callEventAdded:(id)arg1;
- (id)ceilingForEvent:(id)arg1;
- (void)chatSessionDidTransitionToViewed:(id)arg1;
- (id)debugStringForKey:(id)arg1;
- (void)deferredScoreUpdateTimerAction;
- (void)deleteDatabase;
- (void)didUpdateServerProperties:(id)arg1;
- (void)dropDatabase;
- (void)handleChatDBDidSaveIncomingStatusMessages;
- (void)handleChatDBWillSaveIncomingStatusMessages;
- (id)initWithCallStorage:(id)arg1 chatManager:(id)arg2 chatStorage:(id)arg3 localKeyValueStore:(id)arg4 nameDirectory:(id)arg5 sessionManager:(id)arg6 rankingStore:(id)arg7 taskManager:(id)arg8 userDefaults:(id)arg9;
- (id)initWithCallStorage:(id)arg1 chatManager:(id)arg2 chatStorage:(id)arg3 localKeyValueStore:(id)arg4 nameDirectory:(id)arg5 sessionManager:(id)arg6 taskManager:(id)arg7 userDefaults:(id)arg8;
- (void)loadRankingConfiguration;
- (void)logEvent:(id)arg1 forJID:(id)arg2;
- (void)logEvent:(id)arg1 forJID:(id)arg2 allowSideEffects:(_Bool)arg3;
- (void)logEvent:(id)arg1 forJID:(id)arg2 value:(double)arg3;
- (void)logEvent:(id)arg1 forJID:(id)arg2 value:(double)arg3 allowSideEffects:(_Bool)arg4;
- (void)logEvent:(id)arg1 forKey:(id)arg2 value:(double)arg3 allowSideEffects:(_Bool)arg4;
- (void)logRankingDataForUpdatedMessage:(id)arg1;
- (MISSING_TYPE *)normalizedDecayedSignalsForMetric:(id)arg1 normalizationMetric:(id)arg2 currentTime:(double)arg3;
- (void)performRankingStorageCheckpointWithDispatchGroup:(id)arg1 timeout:(double)arg2 force:(_Bool)arg3;
- (void)processChangeNumber:(id)arg1;
- (void)rankNextStatusBatchIfNeeded;
- (void)rankStatusChatSessions:(id)arg1;
- (void)rankStatusChatSessions:(id)arg1 withScoreUpperBound:(short)arg2 logUpdates:(_Bool)arg3 usingRankingCache:(inout id *)arg4;
@property(retain) WARankingStatusRankingConfiguration *rankingConfiguration; // @synthesize rankingConfiguration=_rankingConfiguration;
- (id)rankingStorage:(id)arg1 needsLinksForMetricSetWithKey:(id)arg2;
- (id)rankingStorage:(id)arg1 needsNewKeyForMetricSetWithKey:(id)arg2;
- (double)rankingTimeTaken;
- (void)scheduleDailyRankingTask;
- (void)schedulePrimaryRankingTask;
- (void)startRankingStatuses;
- (void)startRankingStatusesIfNeeded;
- (id)statusRankScoresForMetricSets:(id)arg1 statusDates:(id)arg2 configuration:(id)arg3 lightweight:(_Bool)arg4 logUpdates:(_Bool)arg5 withCache:(id)arg6 generateDebugStatistics:(_Bool)arg7;
- (void)statusTabClosed;
- (void)updateLinkedIDsForGroupJID:(id)arg1 memberJID:(id)arg2 isParticipant:(_Bool)arg3;
- (void)updateRankScores:(id)arg1;
- (void)updateStatusRankCursor:(unsigned long long)arg1 chatSession:(id)arg2;

@end

