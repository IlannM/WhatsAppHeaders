//
//     Generated by classdumpios 1.0.2 (64 bit).
//
//  Copyright (C) 1997-2019 Steve Nygard.
//

#import <objc/NSObject.h>

#import "WAMediaDownloadPolicyDelegate-Protocol.h"
#import "WAMediaDownloaderSuspendable-Protocol.h"
#import "WARegularMediaDownloadManagerDelegate-Protocol.h"
#import "WAStreamingMediaLoaderManagerDownloadDelegate-Protocol.h"

@class NSMutableDictionary, NSMutableOrderedSet, NSString, WAChatStorage, WAIPCReceiver, WAMediaDownloadPolicy, WANetworkUsageManager, WANetworkUsageMetricsManager, WARegularMediaDownloadManager, WAStreamingMediaLoaderManager, XMPPConnectionMain;
@protocol OS_dispatch_queue;

@interface WAMessageMediaDownloader : NSObject <WAMediaDownloadPolicyDelegate, WARegularMediaDownloadManagerDelegate, WAStreamingMediaLoaderManagerDownloadDelegate, WAMediaDownloaderSuspendable>
{
    WANetworkUsageManager *_networkUsageManager;
    WANetworkUsageMetricsManager *_networkUsageMetricsManager;
    NSMutableOrderedSet *_currentAutodownloadUniqueKeys;
    NSMutableOrderedSet *_pendingAutodownloadUniqueKeys;
    NSMutableDictionary *_pendingIncomingAutodownloadUniqueKeysToMessages;
    NSMutableDictionary *_pendingOutgoingAutodownloadUniqueKeysToMessages;
    WARegularMediaDownloadManager *_regularMediaDownloadManager;
    NSObject<OS_dispatch_queue> *_backgroundSerialQueue;
    WAIPCReceiver *_notificationExtensionReceiver;
    _Atomic int _contentExtensionMergeState;
    WAChatStorage *_chatStorage;
    XMPPConnectionMain *_xmppConnection;
    WAStreamingMediaLoaderManager *_streamingMediaLoaderManager;
    WAMediaDownloadPolicy *_policy;
}

- (void).cxx_destruct;
- (void)addToAutodownloadQueue:(id)arg1 saveToKVS:(_Bool)arg2;
- (id)attachToLocalMediaIfPossibleForMessage:(id)arg1 notify:(_Bool)arg2;
- (void)beginSuspendingDownloadsForReason:(unsigned long long)arg1;
- (_Bool)canQueueMediaDownloadForMessage:(id)arg1 mode:(unsigned long long)arg2;
- (void)cancelAllDownloads;
- (void)cancelMediaDownloadForMessage:(id)arg1 userInitiated:(_Bool)arg2;
@property(readonly, nonatomic) WAChatStorage *chatStorage; // @synthesize chatStorage=_chatStorage;
- (void)chatStorageDidDeleteMessages:(id)arg1;
@property(readonly, nonatomic) int contentExtensionMergeState;
- (void)didFailToDownloadMediaInMessage:(id)arg1 presentAlert:(_Bool)arg2 error:(id)arg3;
- (void)didFinishDownloadingMediaInMessage:(id)arg1 toRelativePath:(id)arg2 downloadState:(int)arg3;
- (void)didUpdateProgressOfMessage:(id)arg1;
- (void)didUpdateStreamingProgress:(id)arg1 ofMessage:(id)arg2;
- (void)dropDeferredObjects;
- (void)endSuspendingDownloadsForReason:(unsigned long long)arg1;
- (id)existingOrNewDownloadPolicy;
- (void)finishContentExtensionMergeForMessageKeys:(id)arg1 processedMessageKeys:(id)arg2;
- (void)handleMediaDownloadForExternalMessage:(id)arg1;
- (_Bool)handleThumbnailDownloadForExternalMessage:(id)arg1;
- (id)initWithChatStorage:(id)arg1 xmppConnection:(id)arg2 streamingMediaLoaderManager:(id)arg3 mmsTaskSessionV4:(id)arg4 mmsTaskSessionV3:(id)arg5 networkUsageManager:(id)arg6 networkUsageMetricsManager:(id)arg7;
- (void)internalProcessContentExtensionInbox;
- (_Bool)isDownloadingMediaInMessage:(id)arg1;
- (void)loadDeferredObjects;
- (void)mediaDownloadPolicyDidRequestSave:(id)arg1;
- (void)notificationExtensionDidSendMessage:(id)arg1;
- (id)playerItemForMessage:(id)arg1;
- (id)playerItemForMessageFNF:(id)arg1;
@property(readonly, nonatomic) WAMediaDownloadPolicy *policy; // @synthesize policy=_policy;
- (_Bool)prepareContentExtensionPreMerge:(CDStruct_d10438cc *)arg1;
- (void)processContentExtensionInbox;
- (id)processContentExtensionMerge:(CDStruct_d10438cc)arg1;
- (void)processPendingAutodownloads;
- (float)progressOfMediaDownloadForMessage:(id)arg1;
- (void)queueFirstScanDownloadForMessage:(id)arg1;
- (void)queueMediaDownloadForMessage:(id)arg1;
- (void)queueMediaDownloadForMessage:(id)arg1 mode:(unsigned long long)arg2;
- (void)queueMediaDownloadForMessage:(id)arg1 mode:(unsigned long long)arg2 requestLengthType:(long long)arg3;
- (void)registerDailyStatsCallback:(id)arg1;
- (void)regularMediaDownloader:(id)arg1 didFailToDownloadMediaInMessage:(id)arg2 presentAlert:(_Bool)arg3 error:(id)arg4;
- (void)regularMediaDownloader:(id)arg1 didFinishDownloadingMediaInMessage:(id)arg2 toRelativePath:(id)arg3 downloadState:(int)arg4;
- (void)regularMediaDownloader:(id)arg1 didFinishDownloadingThumbnailForMessage:(id)arg2;
- (void)regularMediaDownloader:(id)arg1 didUpdateProgressOfMessage:(id)arg2;
- (void)regularMediaDownloader:(id)arg1 didUpdateTemporaryMediaForMessage:(id)arg2 inPath:(id)arg3;
- (void)reloadMediaDownloadPolicy;
- (void)removeFromAutodownloadQueue:(id)arg1 removeFromKVS:(_Bool)arg2;
- (void)sendNotificationExtensionPlayedPTTReceipts:(id)arg1;
@property(readonly, nonatomic) WAStreamingMediaLoaderManager *streamingMediaLoaderManager; // @synthesize streamingMediaLoaderManager=_streamingMediaLoaderManager;
- (void)streamingMediaLoaderManager:(id)arg1 didBeginDownloadingMediaInMessage:(id)arg2 currentProgress:(id)arg3;
- (void)streamingMediaLoaderManager:(id)arg1 didFailToDownloadMediaInMessage:(id)arg2 presentAlert:(_Bool)arg3 error:(id)arg4;
- (void)streamingMediaLoaderManager:(id)arg1 didFinishAggressivelyPrefetchingMediaInMessage:(id)arg2;
- (void)streamingMediaLoaderManager:(id)arg1 didFinishDownloadingMediaInMessage:(id)arg2 toRelativePath:(id)arg3;
- (void)streamingMediaLoaderManager:(id)arg1 didUpdateDownloadProgress:(id)arg2 inMessage:(id)arg3;
- (void)submitInsufficientSpaceAutoDownloadEventForMessage:(id)arg1;
- (void)updateMessage:(id)arg1 withMediaAtRelativePath:(id)arg2 notify:(_Bool)arg3;
@property(readonly, nonatomic) XMPPConnectionMain *xmppConnection; // @synthesize xmppConnection=_xmppConnection;
- (void)xmppConnectionStateDidChange:(id)arg1;

// Remaining properties
@property(readonly, copy) NSString *debugDescription;
@property(readonly, copy) NSString *description;
@property(readonly) unsigned long long hash;
@property(readonly) Class superclass;

@end

