//
//     Generated by classdumpios 1.0.2 (64 bit).
//
//  Copyright (C) 1997-2019 Steve Nygard.
//

#import <objc/NSObject.h>

#import "WAPersistentRequestManagerRegistering-Protocol.h"

@class NSMutableDictionary, NSString, WABackgroundConnectionAvailableNotifier, WAChatStorage, WAExactTimer, WAMediaUploaderMain, WAMutableDictionary, WAPersistentKeyValueStore, WASignalManager, WAThumbnailToMMSConfigHelper, XMPPConnectionMain;

@interface WAMessagingService : NSObject <WAPersistentRequestManagerRegistering>
{
    WAMutableDictionary *_chatJIDToSendQueue;
    NSMutableDictionary *_retryMessagePool;
    NSMutableDictionary *_resendMessagePool;
    WABackgroundConnectionAvailableNotifier *_bgNotifier;
    unsigned long long _backgroundTaskIdentifier;
    NSString *_chatConnectionIdentifier;
    NSString *_uploadAttemptIdentifier;
    _Bool _connectionReady;
    WAExactTimer *_messageTimeoutTimer;
    unsigned long long _messagesAckedCounter;
    WAThumbnailToMMSConfigHelper *_thumbnailToMMSConfigHelper;
    WAChatStorage *_chatStorage;
    XMPPConnectionMain *_xmppConnection;
    WASignalManager *_signalManager;
    WAMediaUploaderMain *_mediaUploader;
    WAPersistentKeyValueStore *_keyValueStore;
}

+ (_Bool)nextSendTaskBatchable:(id)arg1 withLastSendTask:(id)arg2;
+ (_Bool)uploadTaskIsSmall:(id)arg1;
- (void).cxx_destruct;
- (void)addToInMemoryCollectionAndResendMessage:(id)arg1 expiration:(double)arg2;
- (id)addToInMemoryCollectionAndSendRetryMessage:(id)arg1 actorJIDWrapper:(id)arg2 retryState:(id)arg3;
- (void)asyncLoadPendingMessages;
- (void)asyncLoadSavedResendMessageTasks;
- (void)asyncLoadSavedRetryMessageTasks;
- (void)bumpSendQueueWithChatJID:(id)arg1;
- (_Bool)canSendMessages;
- (void)cancelSendForMessage:(id)arg1;
@property(readonly, nonatomic) WAChatStorage *chatStorage; // @synthesize chatStorage=_chatStorage;
- (void)chatStorageDidDeleteMessages:(id)arg1;
- (_Bool)completePendingMessageTaskWithMessageID:(id)arg1 sendSuccess:(_Bool)arg2;
- (_Bool)completePendingMessageTaskWithMessageID:(id)arg1 sendSuccess:(_Bool)arg2 returnedMessage:(id *)arg3;
- (void)completeResendTaskForMessageID:(id)arg1;
- (void)completeRetryMessageTaskWithMessageID:(id)arg1 actorJIDWrapper:(id)arg2;
- (void)didCancelUploadForMessage:(id)arg1;
- (void)didFinishUploadForMessage:(id)arg1;
- (_Bool)didFinishUploadForMessage:(id)arg1 withError:(id)arg2 terminal:(_Bool)arg3;
- (id)didReceiveServerAckForMessageID:(id)arg1 actorJIDWrapper:(id)arg2 negativeAck:(_Bool)arg3;
- (void)encryptAndSendMessageTask:(id)arg1 actorJIDWrapper:(id)arg2 retryCount:(unsigned long long)arg3 completion:(CDUnknownBlockType)arg4;
- (void)encryptAndSendMessageTask:(id)arg1 resendPendingDevices:(id)arg2 actorJIDWrapper:(id)arg3 retryCount:(unsigned long long)arg4 completion:(CDUnknownBlockType)arg5;
- (_Bool)failPendingMessageTaskWithMessageID:(id)arg1 message:(id)arg2 reason:(long long)arg3;
- (void)finishSendMessage:(id)arg1 sendQueue:(id)arg2;
- (void)handleBackgroundSessionEventCompletionHandler:(CDUnknownBlockType)arg1;
- (void)handleUploadAttemptResultState:(_Bool)arg1 sendTaskToUpload:(id)arg2 message:(id)arg3 chatJID:(id)arg4 sendQueue:(id)arg5;
- (_Bool)hasAnyIdentityChangesForPendingCompanionDevicesOfMessage:(id)arg1;
- (_Bool)hasPendingSendTask;
- (id)initWithChatStorage:(id)arg1 xmppConnection:(id)arg2 signalManager:(id)arg3 mediaUploader:(id)arg4 keyValueStore:(id)arg5;
- (void)insertAndStartQueueForTask:(id)arg1;
@property(readonly, nonatomic) WAPersistentKeyValueStore *keyValueStore; // @synthesize keyValueStore=_keyValueStore;
- (void)loadDeferredObjects;
- (void)loadPendingMessages;
@property(readonly, nonatomic) WAMediaUploaderMain *mediaUploader; // @synthesize mediaUploader=_mediaUploader;
- (void)registerHandlersForPersistentRequestManager:(id)arg1;
- (_Bool)removePendingSendTaskIfNecessaryForMessage:(id)arg1;
- (void)reportFieldStatsForSentMessageAttempt:(id)arg1 result:(long long)arg2 terminal:(_Bool)arg3 retryCount:(unsigned long long)arg4;
- (void)resendAllMessages;
- (void)resendMessageDueToNewDevice:(id)arg1 expiration:(double)arg2;
- (void)retryMessageWithID:(id)arg1 actorJIDWrapper:(id)arg2 recipientRegistrationID:(id)arg3 retryCount:(unsigned long long)arg4 offline:(_Bool)arg5;
- (void)retryUploadForMessage:(id)arg1;
- (void)sendMessage:(id)arg1;
- (void)sendMessageGroup:(id)arg1;
- (void)sendMessageWithInProgressUpload:(id)arg1;
- (void)sendResendMessageTask:(id)arg1;
- (id)sharedObjectKeyForPersistentRequestManager:(id)arg1;
@property(readonly, nonatomic) WASignalManager *signalManager; // @synthesize signalManager=_signalManager;
- (void)startMessageTimeoutTimerIfNeeded;
- (void)submitRetryFromUnknownDeviceFieldStatsWithPrimary:(_Bool)arg1 offline:(_Bool)arg2;
- (void)updateBackgroundExecutionStateIfNeeded;
- (void)updateMessageSendDateForMessages:(id)arg1;
- (void)updateUploadAttemptIdentifierAndRetryFailedUploads:(id)arg1;
@property(readonly, nonatomic) XMPPConnectionMain *xmppConnection; // @synthesize xmppConnection=_xmppConnection;
- (void)xmppConnectionStateDidChange:(id)arg1;

// Remaining properties
@property(readonly, copy) NSString *debugDescription;
@property(readonly, copy) NSString *description;
@property(readonly) unsigned long long hash;
@property(readonly) Class superclass;

@end

